{% extends "base.html" %}
{% load static %}
{% block title %}Establece nueva contraseña{% endblock %}

{% block content %}
<div class="max-w-md mx-auto py-12">
    <h1 class="text-2xl font-semibold text-center mb-6">Nueva contraseña</h1>
    <form method="post" class="space-y-6 bg-white p-8 rounded-lg shadow">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <!-- Contraseña nueva -->
        <div>
            <label for="{{ form.new_password1.id_for_label }}" class="block text-sm font-medium text-gray-700">
                Contraseña nueva
            </label>
            <div class="relative mt-1">
                {{ form.new_password1 }}
                <button type="button" id="toggleNew1"
                    class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700">
                    <svg data-feather="eye" class="toggle-open h-5 w-5"></svg>
                    <svg data-feather="eye-off" class="toggle-close hidden h-5 w-5"></svg>
                </button>
            </div>
            {% for err in form.new_password1.errors %}
            <p class="text-red-600 text-sm mt-1">{{ err }}</p>
            {% endfor %}
        </div>

        <!-- Confirmar contraseña -->
        <div>
            <label for="{{ form.new_password2.id_for_label }}" class="block text-sm font-medium text-gray-700">
                Confirmar contraseña
            </label>
            <div class="relative mt-1">
                {{ form.new_password2 }}
                <button type="button" id="toggleNew2"
                    class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700">
                    <svg data-feather="eye" class="toggle-open h-5 w-5"></svg>
                    <svg data-feather="eye-off" class="toggle-close hidden h-5 w-5"></svg>
                </button>
            </div>
            {% for err in form.new_password2.errors %}
            <p class="text-red-600 text-sm mt-1">{{ err }}</p>
            {% endfor %}

            <!-- Mensaje de validación -->
            <p id="matchMessage" class="mt-2 text-sm"></p>
        </div>

        <button type="submit" class="w-full py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition">
            Cambiar contraseña
        </button>
    </form>
</div>

<script src="{% static 'js/password_reset_confirm.js' %}"></script>
{% endblock %}